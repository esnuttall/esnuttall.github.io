webpackJsonp([5,155],{"2mTW":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.contactCount,n=e.isInContactRequestsView,r=e.onClick;if(!t&&!n)return null;var a=void 0;return a=t>X?M.a._("1000+ contact requests","messaging"):t>=Y&&t<=X?M.a._("100+ contact requests","messaging"):B.h(M.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:""+t}),D.a.createElement("div",{className:"Module ContactRequestsCount"},D.a.createElement(G.a,{className:z()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:r,text:a,type:"borderless"}))}function s(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?D.a.createElement("div",{className:"Module ContactRequestsCount"},D.a.createElement(K,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),D.a.createElement(F.b,{padding:2},D.a.createElement(F.F,{size:"sm"},M.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return D.a.createElement("div",{key:e.id},0!==t?Z:null,D.a.createElement(H,e))})):null}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,a=e.handleContactWrapperClick,o=e.isSelected,i=e.isUser,s=["selectionIndicator","contactCircleRep","selectionIndicator"];return D.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function e(){return a(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},me(n,r),o?D.a.createElement("div",{className:s.join(" ")},he):null)}function d(e){var t=e.tokenizedItems;return D.a.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},D.a.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return D.a.createElement("div",{className:"tokenItem",key:t},e.full_name?D.a.createElement(J.a,{size:"small",users:[e]}):D.a.createElement(J.a,{emails:[e],size:"small"}))})),be)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e){var t=e.boardInvites;return t?D.a.createElement("div",null,t.map(function(e){return D.a.createElement(Ie,{boardInviteItem:e,key:e.id})})):null}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var j=n("OVW8"),D=n.n(j),R=n("DUIN"),B=n("5tOk"),M=n("W/Cr"),L=n("IaRT"),A=n.n(L),U=n("ZtCB"),W=n.n(U),F=n("gEaE"),H=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=a(this,e.call.apply(e,[this].concat(c))),o.state={contactRequestCompleted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},o.handleInviteAcceptResponse=function(){o.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),W.a.create("ContactRequestAcceptResource",{contact_request:o.props}).callUpdate().then(function(){o.setState({contactRequestCompleted:!0,isAcceptButtonLoading:!1})})},o.handleInviteDeclineResponse=function(){o.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),W.a.create("ContactRequestIgnoreResource",{contact_request:o.props}).callDelete().then(function(){o.setState({contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})},i=n,a(o,i)}return o(t,e),t.prototype.renderRequestText=function e(t,n,r){if(t){var a=t.name,o=t.url;return B.h(M.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:a,boardUrl:o,senderName:n,senderUsername:r})}return B.h(M.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:r})},t.prototype.render=function e(){var t=this.state,n=t.contactRequestCompleted,r=t.isAcceptButtonLoading,a=t.isIgnoreButtonLoading;if(n)return null;var o=this.props,i=o.board,s=o.sender,c=s.image_large_url,l=s.full_name,u=s.username;return D.a.createElement(F.b,{paddingX:2,paddingY:4,xs:{display:"flex"}},D.a.createElement(F.b,{height:50,width:50,shrink:!0},D.a.createElement(F.r,{href:"/"+u+"/"},D.a.createElement(F.a,{name:u,src:c}))),D.a.createElement(F.b,{paddingX:3},D.a.createElement(F.b,{marginBottom:3},D.a.createElement(F.F,null,D.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(i,l,u)}}))),D.a.createElement(F.b,{xs:{display:"flex"},marginLeft:-1,marginRight:-1},D.a.createElement(F.b,{paddingX:1,grow:!0},D.a.createElement(F.c,{disabled:a,onClick:this.handleInviteDeclineResponse,size:"sm",text:M.a._("Ignore","ignore contact request")})),D.a.createElement(F.b,{paddingX:1,grow:!0},D.a.createElement(F.c,{color:"red",disabled:r,onClick:this.handleInviteAcceptResponse,size:"sm",text:M.a._("Accept","accept contact request")})))))},t}(j.Component),V=n("GGB8"),z=n.n(V),G=n("nM9s"),q=n("Grh7"),Y=100,X=1e3,K=Object(q.a)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(i),Z=D.a.createElement(F.h,null),Q=Object(q.a)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(s),J=n("NYeZ"),$=n("tmfO"),ee=n("Kqaz"),te=n("/S3G"),ne=n("MQ2h"),re=n.n(ne),ae=n("Vfgg"),oe=n("kzic"),ie=n("dCTv"),se=n("fvzG"),ce=50,le=D.a.createElement("span",{className:"conversationUnreadMark"}),ue=function(e){function t(){var n,r,a;c(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=l(this,e.call.apply(e,[this].concat(i))),r.state={isHidden:!1,unread:r.props.data.unread||0},r.handleHideConversation=function(e){e.stopPropagation();var t=r.props.data.id;W.a.create("ConversationResource",{conversation_id:t}).callDelete({showError:!1}),r.removeConversationChatHead(t),r.setState({isHidden:!0}),r.logConversationItemHide(t)},r.handleConversationItemClick=function(){var e=r.props.data;r.setState({unread:0}),e.board||r.showConversationChatHead(e),r.logConversationItemClick()},r.logConversationItemClick=function(){(0,r.props.contextLog)(101,{component:54,element:277})},r.logConversationItemHide=function(e){(0,r.props.contextLog)(182,{component:54,element:277,conversation_id:e})},a=n,l(r,a)}return u(t,e),t.prototype.showConversationChatHead=function e(t){var n=this.props.dispatch,r=t.id;n(Object(se.e)(r)),n(Object(se.d)(r)),n(te.a)},t.prototype.removeConversationChatHead=function e(t){var n=this.props.dispatch;n(Object(se.c)(t)),n(Object(se.a)(t))},t.prototype.renderConversationsTitleNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(e,t){return D.a.createElement($.b,{to:"/"+e.username+"/",key:t},e.first_name)}).concat(t.map(function(e,t){return D.a.createElement("span",{key:t},e)}));return D.a.createElement("div",{className:"membersTitleNames"},n.map(function(e,t){var r=M.a._(", ","comma separating conversation member names");return D.a.createElement("span",{key:t},e,t===n.length-1?"":D.a.createElement("span",null,r))}))},t.prototype.renderConversationsTitleView=function e(t,n,r,a){var o=this.props.viewerId,i=a.filter(function(e){return e.id!==o});return D.a.createElement("h1",{className:"conversationTitleContainer"},n||this.renderConversationsTitleNames(r,i))},t.prototype.renderLastMessage=function e(t){var n=t.board,r=t.created_at,a=t.pin,o=t.sender,i=t.text,s=t.user,c=i;if(!c){var l=o.first_name;a?c=B.h(M.a._("{{ senderName }} sent a Pin","messaging"),{senderName:l}):n?c=B.h(M.a._("{{ senderName }} sent a board","messaging"),{senderName:l}):s&&(c=B.h(M.a._("{{ senderName }} sent a user profile","messaging"),{senderName:l}))}return c=Object(ae.b)(c||"",50),D.a.createElement("div",null,D.a.createElement("div",{className:"lastMessageContent"},c),D.a.createElement("div",{className:"lastMessageTimestamp"},M.a.getHumanizedTimesince(r)))},t.prototype.renderItemContent=function e(){var t=this.state.isHidden,n=this.props.data,r=n.board,a=n.emails,o=n.last_message,i=n.name,s=n.users,c=a||[];return D.a.createElement("div",{className:z()("ConversationListItemReact",{conversationHidden:t})},D.a.createElement("div",{className:"conversationRepContainer"},D.a.createElement(J.a,{board:r,emails:c,users:s})),D.a.createElement("div",{className:"conversationContentContainer"},this.renderConversationsTitleView(r,i,c,s),o?this.renderLastMessage(o):null),this.state.unread>0?le:null,D.a.createElement(G.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:M.a._("Ã—","close button"),type:"borderless"}))},t.prototype.render=function e(){var t=this.props.data,n=t.board;return t.users.length?n?D.a.createElement($.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):D.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null},t}(j.Component);ue.contextTypes={userAgent:A.a.shape({isMobile:A.a.bool.isRequired}).isRequired};var pe=function e(t){return{viewerId:t.viewer.id}},de=Object(ne.compose)(Object(R.connect)(pe),ee.a,Object(ie.a)(),oe.withRouter)(ue),me=function e(t,n){var r=n.emails,a=n.users,o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return D.a.createElement("div",{className:"contactWrapper"},D.a.createElement(J.a,{emails:[n],size:"small"}),D.a.createElement("div",{className:"contactTextInfo"},D.a.createElement("span",{className:"contactName"},n),D.a.createElement("span",{className:"contactDescription"},M.a._("Email friend","on selected contact list"))))}},i=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=n[0].id===t?n[1]:n[0],a=r.full_name;return D.a.createElement("div",{className:"contactWrapper"},D.a.createElement(J.a,{size:"small",users:[r]}),D.a.createElement("div",{className:"contactTextInfo"},D.a.createElement("span",{className:"contactName"},a),D.a.createElement("span",{className:"contactDescription"},M.a._("On Pinterest","info about a contact"))))};return D.a.createElement("div",null,r&&r.length>0?o(r):i(a))},he=D.a.createElement("em",null);p.defaultProps={isSelected:!1};var fe=n("tZWC"),ge=n("eXpm"),ve=n.n(ge),be=D.a.createElement("div",{className:"textFieldContainer"}),ye=8,Ee=2,Ce=function(e){function t(){var n,r,a;m(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=h(this,e.call.apply(e,[this].concat(i))),r.state={contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""},r.onHandleContactClick=function(e,t){var n=r.state,a=n.selectedEmails,o=n.selectedUsers,i=e?o:a,s=e?t.id:t,c=i[s];i[s]=!c,c?r.removeTokenItem(t):r.addTokenItem(t)},r.getSelectedEmails=function(){var e=r.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})},r.getSelectedUsers=function(){var e=r.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})},r.handleTypeaheadKeyDown=function(e){var t=r.state,n=t.contactCounter,a=t.selectedEmails,o=t.selectedUsers,i=t.tokenizedItems,s=t.value;if(e.keyCode===ye&&n&&!s){var c=i.pop(),l=!!c.id,u=c.id||c;(l?o:a)[u]=!1,r.setState({contactCounter:n-1,tokenizedItems:i})}},r.handleInviteItemClick=function(e,t){var n=r.state,a=n.selectedUsers,o=n.selectedEmails,i=e?a:o,s=t.id||t;i[s]||(i[s]=!0,r.addTokenItem(t))},r.handleSendMessage=function(){var e=r.getSelectedEmails(),t=r.getSelectedUsers(),n=r.props.dispatch;W.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data.id;n(Object(se.e)(t)),n(Object(se.d)(t))})},r.addTokenItem=function(e){var t=r.state,n=t.contactCounter,a=t.tokenizedItems;r.setState({contactCounter:n+1,tokenizedItems:a.concat([e]),value:""})},r.removeTokenItem=function(e){var t=r.state,n=t.contactCounter,a=t.tokenizedItems;n-=1,e.id?(a=a.filter(function(t){return t.id!==e.id}),r.setState({contactCounter:n,tokenizedItems:a})):r.setState({contactCounter:n,tokenizedItems:(a||[]).filter(function(t){return t!==e})})},r.renderSendMessageButton=function(){return D.a.createElement(G.a,{className:z()("sendNewMessageButton"),hasText:!0,onClick:r.handleSendMessage,showText:!0,text:M.a._("Next","open the new chat"),type:"borderless"})},r.renderCancelMessageButton=function(){var e=r.props.handleCancelNewMessageClick;return D.a.createElement(G.a,{className:z()("cancelNewMessageView","cancelButton"),hasText:!0,onClick:e,showText:!0,text:M.a._("Cancel","cancel new message view"),type:"borderless"})},a=n,h(r,a)}return f(t,e),t.prototype.getContactItem=function e(t,n,r){var a=t.emails,o=t.users;return r&&o?o[0].id===n?o[1]:o[0]:a[0]},t.prototype.render=function e(){var t=this,n=this.props,r=n.conversationItems,a=n.viewerId,o=this.state,i=o.contactCounter,s=o.selectedUsers,c=o.selectedEmails,l=o.value,u=new Set,m=r.map(function(e,n){var r=e.emails,o=e.users;r||(r=[]),o||(o=[]);var i=o.length+r.length;if(i>0&&i<=2){var l=0===r.length,d=t.getContactItem(e,a,l);if(d){var m=d.id||d;if(!u.has(m))return u.add(m),D.a.createElement(p,{className:"conversationContactContainer",contactItem:d,conversationItem:e,currentUserID:a,handleContactWrapperClick:t.onHandleContactClick,isSelected:s[m]||c[m],isUser:l,key:m+"-"+n})}}return null});return D.a.createElement("div",null,D.a.createElement("div",{className:ve.a.conversationsGroupHeader},D.a.createElement("h1",{className:ve.a.newMessageTitle},M.a._("New message","conversations")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),D.a.createElement("div",{className:ve.a.conversationGroupTokenizedWrapper},D.a.createElement("div",{className:ve.a.tokenizedWrapperTitle},M.a._("To:","new message")),D.a.createElement("div",{className:ve.a.socialTypeaheadContainer},D.a.createElement(d,{tokenizedItems:this.state.tokenizedItems}),D.a.createElement(fe.a,{changeOnTextHover:!1,className:z()(ve.a.typeahead,"reactNewMessageTypeahead"),onChange:function e(n){return t.setState({value:n})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),l?null:D.a.createElement("div",{className:"contactsContainer"},m))},t}(j.Component),we=function e(t){return{viewerId:t.viewer.id}},_e=Object(ne.compose)(Object(R.connect)(we))(Ce),Ie=function(e){function t(){var n,r,a;g(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=v(this,e.call.apply(e,[this].concat(i))),r.state={boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},r.handleInviteResponse=function(e){var t=r.props.boardInviteItem,n=t.board,a=void 0===n?{}:n,o=t.invited_user,i=void 0===o?{}:o;r.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:a.id,invited_user_id:i.id},c=W.a.create("BoardInviteResource",s);(e?c.callUpdate():c.callDelete()).then(function(){r.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})},a=n,v(r,a)}return b(t,e),t.prototype.getBoardRep=function e(t,n){return D.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},D.a.createElement("div",{className:"Image Module boardMessageRep"},D.a.createElement("div",{className:"heightContainer"},D.a.createElement("img",{alt:t,src:n}))))},t.prototype.getBoardInfo=function e(t,n){return D.a.createElement("a",{href:n},D.a.createElement("div",{className:t},t))},t.prototype.getInviteeInfo=function e(t){var n=t.full_name;return D.a.createElement("div",{className:"inviterLine"},Object(B.h)(M.a._("{{ fullName }} invited you to this board"),{fullName:n}))},t.prototype.renderPendingLayout=function e(t,n){var r=this,a=t.image_thumbnail_url,o=t.name,i=t.url;return D.a.createElement("div",{className:"pending"},D.a.createElement("div",{className:"left"},this.getBoardRep(o,a),D.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),this.getInviteeInfo(n))),D.a.createElement("div",{className:"actions"},D.a.createElement(G.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return r.handleInviteResponse(!1)},text:M.a._("Ignore","ignore board invite")}),D.a.createElement(G.a,{className:z()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return r.handleInviteResponse(!0)},text:M.a._("Accept","accept board invite")})))},t.prototype.renderCompletedLayout=function e(t){var n=t.image_thumbnail_url,r=t.name,a=t.url;return D.a.createElement("div",{className:"success displayed"},D.a.createElement("div",{className:"left"},this.getBoardRep(r,n),D.a.createElement("div",{className:"description"},this.getBoardInfo(r,a),D.a.createElement("div",{className:"inviterLine"},M.a._("You joined this board","board invites")))))},t.prototype.render=function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user;return D.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,r):this.renderCompletedLayout(n))},t}(j.Component),Se=Object(q.a)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1})(y),Te=n("nX0T"),Oe=500,Ne="existingConversationsView",xe="newMessageView",ke="contactRequestsView",Pe=D.a.createElement("div",{className:"icon"}),je=D.a.createElement("div",{className:"boardInvitesContainer"},D.a.createElement(Se,null)),De=function(e){function t(){var n,r,a;E(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=C(this,e.call.apply(e,[this].concat(i))),r.state={currentView:Ne},r.handleCancelSecondaryView=function(){r.setState({currentView:Ne})},r.handleNewMessageButtonClick=function(){r.setState({currentView:xe}),r.logNewMessageButtonClick()},r.handleViewContactRequestsClick=function(){r.setState({currentView:ke})},r.handleScroll=function(){r.props.isFetching||(r._container&&r._container.scrollHeight-r._container.scrollTop-r._container.clientHeight)<Oe&&r.fetchMore()},r.logNewMessageButtonClick=function(){(0,r.props.contextLog)(101,{component:54,element:275})},a=n,C(r,a)}return w(t,e),t.prototype.componentDidMount=function e(){this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll)},t.prototype.componentWillUnmount=function e(){this._container.removeEventListener("scroll",this.handleScroll)},t.prototype.fetchMore=function e(){var t=this.props,n=t.isAtEnd,r=t.isFetching,a=t.fetchMoreData,o=t.isFullAuth;!r&&o&&(n?this._container.removeEventListener("scroll",this.handleScroll):a())},t.prototype.renderNewMessageView=function e(){var t=this.props.conversations,n=void 0===t?[]:t;return D.a.createElement("div",{className:"newMessageContainer"},D.a.createElement(_e,{conversationItems:n,handleCancelNewMessageClick:this.handleCancelSecondaryView}))},t.prototype.renderContactRequestsView=function e(){return D.a.createElement("div",{className:"contactRequestsContainer"},D.a.createElement(Q,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))},t.prototype.renderEmptyMessagesNewMessageUpsell=function e(){return D.a.createElement("div",{className:"EmptyConversations Module"},Pe,D.a.createElement("div",{className:"intro"},D.a.createElement("div",null,M.a._("Send messages to your friends!")),D.a.createElement("div",null,M.a._("Plan projects, swap ideas and share your best discoveries."))))},t.prototype.renderExistingConversationsView=function e(){var t=this.props,n=t.conversations,r=void 0===n?[]:n,a=t.isAtEnd;return D.a.createElement("div",{className:"existingConversationsContainer"},D.a.createElement("div",{className:"newMessageButtonContainer"},D.a.createElement(G.a,{className:"createConversationTab",hasIcon:!0,onClick:this.handleNewMessageButtonClick,text:M.a._("New message"),type:"borderless"})),D.a.createElement("div",{className:"viewContactRequestsButtonContainer"},D.a.createElement(K,{onClick:this.handleViewContactRequestsClick})),D.a.createElement("div",{className:"existingConversationItemsWrapper"},je,D.a.createElement("ul",{className:"conversationItems"},0===r.length&&a?this.renderEmptyMessagesNewMessageUpsell():r.map(function(e){return D.a.createElement("li",{className:"conversationItemWrapper",key:e.id},D.a.createElement(de,{data:e}))}))))},t.prototype.renderMessageView=function e(){switch(this.state.currentView){case Ne:return this.renderExistingConversationsView();case xe:return this.renderNewMessageView();case ke:return this.renderContactRequestsView()}},t.prototype.render=function e(){var t=this;return D.a.createElement(Te.a,{view:42,viewParameter:203},D.a.createElement("div",{className:"conversationPanel",ref:function e(n){t._container=n}},this.renderMessageView()))},t}(j.Component),Re=function e(t){return{isFullAuth:t.viewer.isAuth&&!t.viewer.isLimitedLogin}},Be=Object(ne.compose)(Object(R.connect)(Re),ee.a,Object(q.a)({name:"ConversationsResource",key:"conversations"}))(De),Me=n("SnoN"),Le={ONE:1,TWO:2,END:3},Ae=function(e){function t(){var n,r,a;_(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=I(this,e.call.apply(e,[this].concat(i))),r.state={educationStep:Le.ONE},r.toStepTwo=function(){r.setState({educationStep:Le.TWO})},r.dismissEducation=function(){var e=r.props.handleDismiss;r.setState({educationStep:Le.END}),e()},a=n,I(r,a)}return S(t,e),t.prototype.componentDidMount=function e(){var t=this,n=this.props.stepDelay;this.educationStepTimer=setTimeout(function(){t.state.educationStep<Le.TWO&&t.setState({educationStep:Le.TWO})},n)},t.prototype.componentWillUnmount=function e(){clearTimeout(this.educationStepTimer)},t.prototype.renderPill=function e(t,n,r){return D.a.createElement("button",{onClick:r,className:z()("educationPill","slideIn",{fadeOut:n})},D.a.createElement("div",{className:"message"},t))},t.prototype.render=function e(){var t=this.state.educationStep,n=this.props,r=n.titleText,a=n.titleText2,o=this.renderPill(r,t===Le.TWO,this.toStepTwo),i=this.renderPill(a,t===Le.END,this.dismissEducation);return D.a.createElement("div",{className:"newsHubEducation"},D.a.createElement("div",{className:"educationStep stepOne"},(t===Le.ONE||t===Le.TWO)&&o),D.a.createElement("div",{className:"educationStep stepTwo bottom"},(t===Le.TWO||t===Le.END)&&i))},t}(j.Component),Ue=n("zFaW"),We=n("7Dxt"),Fe=Object(We.a)(Ue.a),He=n("mnfW"),Ve=n("RvAN"),ze=n("mHth"),Ge=n("AYde"),qe=n("YZkw"),Ye=4,Xe=864e5,Ke=function(e){function t(n){T(this,t);var r=O(this,e.call(this,n));return r.state={shouldEducate:!1},r.onDataFetched=function(e){r.props.experience&&e>Ye&&!r.state.shouldEducate&&r.setState({shouldEducate:!0})},r.handleItemClick=function(){r.handleComplete(),r.props.handleItemClick()},r.handleComplete=function(){var e=r.props,t=e.experienceClient,n=e.experience;n&&t.completeExperience(n.placement_id,n.experience_id)},r.handleDismiss=function(){var e=r.props,t=e.experienceClient,n=e.experience;n&&t.dismissExperience(n.placement_id,n.experience_id)},r.renderItem=function(e,t){var n={impressionAuxFields:{displayMode:e.encoded_display_mode,newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107};return D.a.createElement("li",{className:"newsHubItemWrapper",key:t},r.renderDate(e.last_updated_at,t),D.a.createElement(Fe,Object.assign({contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:r.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,siteType:r.props.siteType,textMapping:e.text_mapping,type:e.news_type,unread:e.unread},n)))},r.renderEmptyState=function(){var e=r.props.i18n;return D.a.createElement(F.b,{height:400},D.a.createElement(F.b,{display:"flex",justifyContent:"center",color:"darkGray",shape:"pill",paddingY:5,margin:5},D.a.createElement(F.f,{xs:10},D.a.createElement(F.F,{bold:!0,color:"white",size:"lg"},e._("New! Discover ideas from your friends, followers and people who love your Pins!")))))},r.currentDay=null,r.today=new Date,r.today.setHours(0,0,0,0),r}return N(t,e),t.prototype.getChildContext=function e(){return{preloadingSupported:!0}},t.prototype.componentDidMount=function e(){var t=this.props,n=t.experience,r=t.experienceClient;n&&r.viewExperience(n.placement_id,n.experience_id),this.logPanelImpression()},t.prototype.shouldComponentUpdate=function e(t,n){if(this.state.shouldEducate===n.shouldEducate){var r=this.props.experience,a=t.experience;return(r||{}).id!==(a||{}).id}return!0},t.prototype.getEducation=function e(){var t=this.props.experience;if(this.state.shouldEducate&&t){var n=t.display_data,r=n.step_delay,a=n.title_text,o=n.title_text_2;return D.a.createElement(Ae,{handleDismiss:this.handleDismiss,stepDelay:r,titleText:a,titleText2:o})}return null},t.prototype.logPanelImpression=function e(){var t=this.props.contextLog,n=Me.a.getInstance(),r=n.getViewFromContext();t(13,{view:107,viewParameter:3081}),n.addViewToContext(r)},t.prototype.renderDate=function e(t,n){var r=this.props.i18n,a=new Date(t);if(a.setHours(0,0,0,0),0!==n&&null!==this.currentDay&&void 0!==this.currentDay){var o=this.currentDay;if(a.getTime()===o.getTime())return null}this.currentDay=a;var i=void 0;return i=a.getTime()===this.today.getTime()?r._("Today"):a.getTime()===new Date(this.today-864e5).getTime()?r._("Yesterday"):a&&a>=new Date(this.today-5184e5)?r.getHumanizedTimesince(a.toString()):He.b.formatDate(this.props.locale,a,He.b.DateFormatType.MONTH_DAY,!1),D.a.createElement("div",{className:"newsHubItemDate"},D.a.createElement(F.F,{bold:!0,size:"xl"},i))},t.prototype.render=function e(){return D.a.createElement(Te.a,{view:107,viewParameter:3081},D.a.createElement("div",null,this.getEducation(),D.a.createElement(Ve.a,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem,resourceName:"NewsHubResource"})))},t}(j.Component);Ke.defaultProps={handleItemClick:function e(){}},Ke.childContextTypes={preloadingSupported:A.a.bool.isRequired};var Ze=Object(ne.compose)(Object(qe.a)(1000035),ee.a,Ge.b,ze.a)(Ke),Qe=n("xYG1"),Je=D.a.createElement(Be,null),$e=function(e){function t(){return x(this,t),k(this,e.apply(this,arguments))}return P(t,e),t.prototype.shouldComponentUpdate=function e(t,n){return this.props.currentPanel!==t.currentPanel||this.props.conversationsUnseenCount!==t.conversationsUnseenCount||this.props.newsHubCount!==t.newsHubCount},t.prototype.render=function e(){var t=this.props,n=t.conversationsUnseenCount,r=t.currentPanel,a=t.handleItemClick,o=t.locale,i=t.newsHubCount,s=t.onButtonClick,c=t.siteType,l=void 0;return r===Qe.a.NEWS_HUB?l=D.a.createElement(Ze,{handleItemClick:a,locale:o,siteType:c}):r===Qe.a.INBOX&&(l=Je),D.a.createElement("div",{className:"NewsConversationsDropdown"},D.a.createElement(Qe.b,{conversationsUnseenCount:n,newsHubCount:i,onButtonClick:s,selectedTab:r}),D.a.createElement("div",{className:"content"},l))},t}(j.Component),et=t.default=$e},"7Dxt":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=Object(h.a)(e),n=function(e){function n(){var t,o,i;r(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=o=a(this,e.call.apply(e,[this].concat(c))),o.state={impressionStarted:!1,impressionLogged:!1},o.currentNs=function(){return Date.now()*y},o.startTime=0,o.debugPinImpressions=v&&"Pin"===o.props.impressionType&&o.props.viewer.isEmployee,o.handleVisibilityChanged=function(e){var t=o.props,n=t.componentType,r=t.contextLog,a=t.contextLogData,i=t.impressionAuxFields,s=t.impressionType,c=t.loggingId,l=t.slotIndex,u=t.viewParameter,p=t.viewType,d=t.viewData;if(e<=0){var m,h,f=b[s],g=f.idType,v=o.currentNs(),y=Object.assign((m={endTime:v},m[g]=c,m.slotIndex=l,m.time=o.startTime,m.renderDuration=v-o.startTime,m),i);r(f.eventType,Object.assign({component:n,eventData:(h={},h[f.impressionType]=[y],h),view:p,viewParameter:u,viewData:d},a)),o.debugPinImpressions&&(console.log(l+" logged for "+(v-o.startTime)/1e9+"s"),o.setState({impressionStarted:!1,impressionLogged:!0}))}else o.startTime=o.currentNs(),o.debugPinImpressions&&(console.log(l+" started timer"),o.setState({impressionStarted:!0}))},i=t,a(o,i)}return o(n,e),n.prototype.render=function e(){return c.a.createElement(t,Object.assign({onVisibilityChanged:this.handleVisibilityChanged,debugImpressionStarted:this.debugPinImpressions?this.state.impressionStarted:void 0,debugImpressionLogged:this.debugPinImpressions?this.state.impressionLogged:void 0},this.props))},n}(s.Component);return Object(f.compose)(d.a,m.a)(n)}t.a=i;var s=n("OVW8"),c=n.n(s),l=n("IaRT"),u=n.n(l),p=n("FJZF"),d=n("Kqaz"),m=n("i0Ug"),h=n("sHx0"),f=n("MQ2h"),g=n.n(f),v=p.a.getQueryStringParams()&&p.a.getQueryStringParams().debug_impression_log,b={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110}},y=1e6},"7IpV":function(e,t,n){"use strict";function r(e){return e===window?window.innerHeight:e.clientHeight}function a(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function o(e){return e===window?a():e.scrollTop-e.getBoundingClientRect().top}function i(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function s(e){return e===window?a():e.scrollTop}t.a=r,t.d=a,t.b=i,t.c=s},"9bGG":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){function n(){var e,o,i;r(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return e=o=a(this,t.call.apply(t,[this].concat(c))),o.state={isHovering:!1},o.handlers={onMouseOver:function e(){return o._setHover(!0)},onMouseLeave:function e(){return o._setHover(!1)}},i=e,a(o,i)}return o(n,t),n.prototype.componentDidMount=function e(){f(this)},n.prototype.componentWillUnmount=function e(){clearTimeout(this.hoverTimer),g(this)},n.prototype._setHover=function e(t){var n=this;clearTimeout(this.hoverTimer),this.hoverTimer=t&&d?setTimeout(function(){return n._setHover(t)},u):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},l)},n.prototype.render=function t(){return c.a.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))},n}(s.Component)}t.a=i;var s=n("OVW8"),c=n.n(s),l=32,u=100,p=null,d=!1,m=[],h=function e(){clearTimeout(p),d=!0,p=setTimeout(function(){d=!1},u)},f=function e(t){0===m.length&&window.addEventListener("scroll",h),m.push(t)},g=function e(t){var n=m.indexOf(t);m.splice(n,1),0===m.length&&window.removeEventListener("scroll",h)}},D0DK:function(e,t){e.exports=function(){var e=[];return e.toString=function e(){for(var t=[],n=0;n<this.length;n++){var r=this[n];r[2]?t.push("@media "+r[2]+"{"+r[1]+"}"):t.push(r[1])}return t.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<t.length;a++){var i=t[a];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},IxI0:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.boardId,n=i(e,["boardId"]);return Object(f.createElement)(Object(k.a)({name:"BoardFeedResource",options:{board_id:t,page_size:50,field_set_key:"board_cover_picker",filter_section_pins:!1},key:"pins"},{allowStale:!1})(P),Object.assign({boardId:t},n))}function p(e){var t=e.alignTop,n=e.children,r=e.label,a=e.labelId;return g.a.createElement(j.b,{alignItems:t?null:"center",deprecatedPadding:{x:2,y:3},xs:{display:"flex"},wrap:!0},g.a.createElement(j.b,{deprecatedPadding:{y:2},xs:{column:12},md:{column:3}},g.a.createElement(B,{label:r,labelId:a})),g.a.createElement(j.b,{xs:{column:12},md:{column:9}},n))}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=n("OVW8"),g=n.n(f),v=n("DUIN"),b=n("FrUj"),y=n("5tOk"),E=n("W/Cr"),C=n("nM9s"),w=n("IaRT"),_=n.n(w),I="236x",S=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=a(this,e.call.apply(e,[this].concat(c))),o.state={deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}},o.handleUpdateImage=function(){var e=o.image,t=e.offsetHeight,n=e.offsetWidth;o.setState({isSpinnerShown:!1,startBgPos:{left:-(n-o.state.holderWidth)/2,top:-(t-o.state.holderHeight)/2}})},o.handleOnMouseUp=function(){o.isDragging=!1,o.setState({startBgPos:{left:o.getBgLeft(),top:o.getBgTop()},deltaX:0,deltaY:0}),o.props.updateImgCrop(o.getCropData())},i=n,a(o,i)}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.holder;this.setState({holderHeight:t.offsetHeight,holderWidth:t.offsetWidth}),document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)},t.prototype.componentWillReceiveProps=function e(t){t.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})},t.prototype.componentWillUnmount=function e(){document.body.removeEventListener("mouseup",this.handleOnMouseUp)},t.prototype.getFrameBounds=function e(){var t=this.props,n=t.frameHeight,r=t.frameWidth,a=this.state,o=a.holderHeight;return{left:a.holderWidth/2-r/2,width:r,height:n,top:o/2-n/2}},t.prototype.getBgLeft=function e(){var t=this.props.frameWidth,n=this.getFrameBounds(),r=this.getImgScale(),a=this._getImageDimensions(),o=a.imgHeight*r,i=a.imgWidth*r,s=0;return o&&i&&((s=this.state.startBgPos.left+this.state.deltaX)+i-t<n.left&&(s=n.left-i+t),s>n.left&&(s=n.left)),s},t.prototype.getBgTop=function e(){var t=this.props.frameHeight,n=this.getFrameBounds(),r=this.getImgScale(),a=this._getImageDimensions(),o=a.imgHeight*r,i=a.imgWidth*r,s=0;return o&&i&&((s=this.state.startBgPos.top+this.state.deltaY)+o-t<n.top&&(s=n.top-o+t),s>n.top&&(s=n.top)),s},t.prototype.getImgScale=function e(){var t=this.props,n=t.frameHeight,r=t.frameWidth,a=this._getImageDimensions(),o=a.imgHeight,i=a.imgWidth,s=this.getFrameBounds();if(o&&i){var c=o/i;return c=c>=s.height/s.width?r/i:n/o}return 1},t.prototype.getImageBounds=function e(){var t=this._getImageDimensions(),n=t.imgHeight,r=t.imgWidth,a={};if(n&&r){var o=this.getImgScale();a={width:o*r,height:o*n}}return a},t.prototype.getBgBounds=function e(){return{left:this.getBgLeft(),top:this.getBgTop()}},t.prototype.getCropData=function e(){var t=this.props,n=t.frameHeight,r=t.frameWidth,a=this.getFrameBounds(),o=this._getImageDimensions(),i=o.imgHeight,s=o.imgWidth,c=this.getBgBounds(),l=this.getImgScale();return{crop_x:Math.round(-(c.left-a.left)/l),crop_y:Math.round(-(c.top-a.top)/l),nativeHeight:i,nativeWidth:s,height:Math.round(n/l),width:Math.round(r/l),scale:1}},t.prototype.handleOnMouseDown=function e(t){0===t.nativeEvent.button&&(t.stopPropagation(),this.isDragging=!0,this.originX=t.pageX,this.originY=t.pageY)},t.prototype.handleOnMouseMove=function e(t){this.isDragging&&this.setState({deltaX:t.pageX-this.originX,deltaY:t.pageY-this.originY})},t.prototype._getImageDimensions=function e(){var t=this.props.pin.images["236x"];return{imgHeight:t.height,imgWidth:t.width}},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardName,a=n.frameHeight,o=n.frameWidth,i=n.isFirst,s=n.isLast,c=n.pin,l=n.showNextPin,u=n.showPrevPin,p=this.state.isSpinnerShown,d=this._getImageDimensions(),m=d.imgHeight,h=d.imgWidth,f=this.getFrameBounds(),v=this.getImageBounds(),b=this.getBgBounds(),w="";return m&&h&&(w="in"),g.a.createElement("div",{className:"ImageCrop"},g.a.createElement("div",{className:"holder",ref:function e(n){t.holder=n}},g.a.createElement("div",{className:"bg",style:b},g.a.createElement("img",{alt:y.c(E.a._("Board cover for {{ boardName }}"),{boardName:r}),className:w,onLoad:this.handleUpdateImage,ref:function e(n){t.image=n},src:c.images["236x"].url,style:v})),g.a.createElement("div",{className:"mask"},g.a.createElement("span",{style:{top:0,left:0,right:0,height:f.top}}),g.a.createElement("span",{style:{top:f.top,left:f.left+o,right:0,height:a}}),g.a.createElement("span",{style:{top:a+f.top,left:0,right:0,bottom:0}}),g.a.createElement("span",{style:{top:f.top,left:0,width:f.left,height:a}})),g.a.createElement("div",{className:"frame",style:f}),g.a.createElement("div",{className:"drag",onMouseDown:function e(n){t.handleOnMouseDown(n)},onMouseMove:function e(n){t.handleOnMouseMove(n)}}),g.a.createElement("div",{className:"spinner",style:{display:p?"":"none"}})),i?null:g.a.createElement(C.a,{className:"previous",onClick:u,text:""}),s?null:g.a.createElement(C.a,{className:"next",onClick:l,text:""}))},t}(f.Component);S.defaultProps={frameHeight:111,frameWidth:236};var T=S,O=n("/e0Y"),N=n("ZtCB"),x=n.n(N),k=n("Grh7"),P=function(e){function t(){var n,r,a;s(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=r=c(this,e.call.apply(e,[this].concat(i))),r.state={coverPinIndex:0,imgCropData:{},isSaving:!1},r.handleSave=function(){r.setState({isSaving:!0});var e=r.props,t=e.pins,n=void 0===t?{}:t,a=e.boardId,o=r.state,i=o.coverPinIndex,s=o.imgCropData,c=n[i],l=c.images["236x"],u=l.url;O.a.trackEvent("board_edit_cover","click_submit");var p=Object.assign({pin_id:c.id,pin_image_url:u},s),d=Object.assign({board_id:a,url:u},p);x.a.create("BoardResource",d).callUpdate().then(function(){O.a.trackEvent("board_edit_cover","success"),r.setState({isSaving:!1}),r.props.onSave(u,{height:l.height,width:l.width,x:s.crop_x,y:s.crop_y})}).catch(function(){r.setState({isSaving:!1})})},r.updateImgCrop=function(e){r.setState({imgCropData:e})},a=n,c(r,a)}return l(t,e),t.prototype.componentDidUpdate=function e(t){var n=this.props.pins,r=t.pins;(n&&r!==n&&n.length||n&&r&&n.length!==r.length)&&n.forEach(function(e){(new Image).src=e.url})},t.prototype.changePin=function e(t){t<0||t>=this.props.pins.length||this.setState({coverPinIndex:t})},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardName,a=n.frameHeight,o=n.frameWidth,i=n.pins,s=this.state,c=s.coverPinIndex,l=s.isSaving;return i?g.a.createElement("div",{className:"BoardCoverEditPage"},g.a.createElement("div",{className:"standardForm"},g.a.createElement("h1",null,g.a.createElement("strong",null,E.a._("Change Board Cover"))," / "+r),g.a.createElement("div",{className:"boardCoverEditPageContainer"},g.a.createElement("div",{className:"BoardCoverEdit"},g.a.createElement(T,{boardName:r,frameHeight:a,frameWidth:o,isFirst:!c,isLast:c===i.length-1,pin:i[c],showNextPin:function e(){t.changePin(c+1)},showPrevPin:function e(){t.changePin(c-1)},updateImgCrop:this.updateImgCrop})),g.a.createElement("div",{className:"formFooter"},g.a.createElement("div",{className:"formFooterButtons"},g.a.createElement(C.a,{isSaving:l,onClick:this.props.onCancel,text:E.a._("Cancel")}),g.a.createElement(C.a,{onClick:this.handleSave,text:E.a._("Save Changes"),type:"primary"})))))):null},t}(f.Component);u.propTypes={boardId:_.a.string.isRequired};var j=n("gEaE"),D=g.a.createElement(j.h,null),R=function e(t){var n=t.children;return g.a.createElement(j.b,{role:"list"},g.a.Children.map(n,function(e,t){return e&&g.a.createElement(j.b,{key:t},e,D)}))},B=function e(t){var n=t.label,r=t.labelId;return r?g.a.createElement(j.p,{htmlFor:r},g.a.createElement(j.F,{size:"sm"},n)):g.a.createElement(j.F,{size:"sm"},n)};p.PropTypes={alignTop:_.a.bool,children:_.a.node,labelId:_.a.string,label:_.a.string};var M=n("BAXv"),L=n("LQgx"),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U=g.a.createElement(j.h,null),W=function(e){function t(n){d(this,t);var r=m(this,e.call(this,n));return r.handleChangeName=function(e){var t=b.getErrors(r.nameValidators,e);r.setState({name:e,nameValidatorErrors:t})},r.handleChangeDescription=function(e){var t=b.getErrors(r.descriptionValidators,e);r.setState({description:e,descriptionValidatorErrors:t})},r.handleChangeCategory=function(e){var t=e.value;r.setState({category:t})},r.handleChangePrivateToggle=function(e){r.setState({privacy:e?"secret":"public"})},r.handleChangeCollabBoardEmail=function(e){r.setState({collab_board_email:e})},r.handleChangeCollaboratorInvitesEnabled=function(e){r.setState({collaboratorInvitesEnabled:e})},r.handleCancel=function(){O.a.trackEvent(r.props.gaCategory,"click_cancel"),r.props.onClose()},r.handleSubmit=function(e){e&&e.preventDefault(),r.submitDisabled()||(O.a.trackEvent(r.props.gaCategory,"click_submit"),r.props.onSubmit(r.fieldValues))},r.handleDelete=function(){r.props.onDeleteButtonClick()},r.handleShowBoardCoverEditModal=function(){r.setState({showBoardCoverEdit:!0})},r.handleHideBoardCoverEditModal=function(){r.setState({showBoardCoverEdit:!1})},r.handleSaveBoardCoverEditModal=function(){var e;r.handleHideBoardCoverEditModal(),(e=r.props).onCropChange.apply(e,arguments)},r.state=Object.assign({},n.board,{collaboratorInvitesEnabled:n.board.collaborator_invites_enabled||!1,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showDeleteConfirmation:!1}),r.descriptionValidators=[b.Length({max:M.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION})],r.nameValidators=[b.Required({message:E.a._("Don't forget to name your board!")}),b.Length({max:M.a.MAX_CHARS_FOR_BOARD_TITLE})],r}return h(t,e),t.prototype.getBoardTitleInput=function e(){var t=this.state,n=t.name,r=t.nameValidatorErrors;return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Name"),labelId:"boardEditName"},g.a.createElement(j.H,{errorMessage:r.join(", "),id:"boardEditName",name:"boardName",onChange:this.handleChangeName,placeholder:E.a._('Like "Places to Go" or "Recipes to Make"'),value:n})))},t.prototype.getCategoriesDropdown=function e(){var t=this.props.categories.map(function(e){return{label:e.name,value:e.key}}),n=[{value:"",label:E.a._("What kind of board is it?")}].concat(t),r=this.state.category||"";return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Category"),labelId:"boardEditCategory"},g.a.createElement(j.B,{id:"boardEditCategory",name:"category",onChange:this.handleChangeCategory,options:n,value:r})))},t.prototype.getCollaboratorsEmailCheckbox=function e(){var t=this.props.board,n=this.state.collab_board_email;return t.is_collaborative&&g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Email notifications"),labelId:"secret"},g.a.createElement(j.b,{alignItems:"center",deprecatedPadding:{y:2},xs:{display:"flex"}},g.a.createElement(j.b,{deprecatedMargin:{right:1}},g.a.createElement(j.D,{switched:n,id:"emailCheckbox",name:"email",onChange:this.handleChangeCollabBoardEmail})),g.a.createElement(j.F,{size:"xs",smSize:1,mdSize:2,lgSize:"xs"},E.a._("Get an email when someone saves Pins to this board")))))},t.prototype.getCollaboratorsInviteList=function e(){var t=this.props,n=t.boardCollaboratorsSection,r=t.showCollaboratorsLearnMore,a=g.a.createElement(j.b,null,E.a._("Collaborators"),r&&g.a.createElement(j.b,null,g.a.createElement(j.r,{target:"blank",href:M.a.GEN.templateConst.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},g.a.createElement(j.F,{size:"sm",smSize:2,mdSize:"xs",lgSize:"sm"},E.a._("Learn more")))));return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{alignTop:!0,label:a,labelId:"collaborators"},g.a.createElement(j.b,{deprecatedPadding:{y:2}},g.a.createElement("div",{className:"boardCollaboratorsWrapper"},n))))},t.prototype.getCollaboratorsInviteToggle=function e(){var t=this.props.board,n=this.state.collaboratorInvitesEnabled;return t.is_collaborative&&g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Let collaborators add people"),labelId:"collaboratorInvitesEnabledCheckbox"},g.a.createElement(j.b,{deprecatedPadding:{y:2}},g.a.createElement(j.D,{switched:n,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:this.handleChangeCollaboratorInvitesEnabled}))))},t.prototype.getCoverEdit=function e(){var t=this.props,n=t.coverImageHeight,r=t.coverImageWidth,a=t.isEditable,o=this.state,i=o.id,s=o.name,c=o.pin_count;return a&&c>0&&g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Cover")},g.a.createElement(j.c,{inline:!0,onClick:this.handleShowBoardCoverEditModal,text:E.a._("Change"),size:"md"}),this.state.showBoardCoverEdit&&g.a.createElement(L.a,{onHide:this.handleHideBoardCoverEditModal},g.a.createElement(u,{boardId:i,boardName:s,frameHeight:n,frameWidth:r,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}))))},t.prototype.getDescriptionInput=function e(){var t=this.state,n=t.description,r=t.descriptionValidatorErrors;return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{alignTop:!0,label:E.a._("Description"),labelId:"boardEditDescription"},g.a.createElement(j.G,{errorMessage:r.join(", "),id:"boardEditDescription",name:"description",onChange:this.handleChangeDescription,placeholder:E.a._("What's your board about?"),value:n})))},t.prototype.getFormFooter=function e(){var t=this.props,n=t.board.id,r=t.creating,a=t.deleting,o=t.updating,i=t.isDeletable,s=t.submitText,c=r,l=a&&a[n],u=o&&o[n],p=void 0,d=c&&c.error||l&&l.error||u&&u.error;d&&(p=E.a._("Uh oh! Something went wrong."),d.message?p=d.message:"string"==typeof d&&(p=d));var m=this.submitDisabled()||c&&c.creating||u&&u.updating||l&&l.deleting;return g.a.createElement(j.b,{alignItems:"center",justifyContent:"between",deprecatedPadding:{x:2,y:3},wrap:!0,xs:{display:"flex"}},i&&g.a.createElement(j.b,{deprecatedMargin:{right:"auto"}},g.a.createElement(j.c,{id:"deleteBoardButton",inline:!0,disabled:!!l,onClick:this.handleDelete,text:E.a._("Delete board"),size:"md"})),p&&g.a.createElement(j.b,{deprecatedPadding:{x:1}},g.a.createElement(j.F,{color:"red",smSize:"xs",mdSize:"sm",lgSize:"md"},p)),g.a.createElement(j.b,{deprecatedMargin:{left:"auto"}},g.a.createElement(j.b,{xs:{display:"flex"},deprecatedMargin:{left:-1,right:-1}},g.a.createElement(j.b,{deprecatedPadding:{x:1}},g.a.createElement(j.c,{id:"cancelButton",inline:!0,onClick:this.handleCancel,text:E.a._("Cancel"),size:"md"})),g.a.createElement(j.b,{deprecatedPadding:{x:1}},g.a.createElement(j.c,{color:"red",disabled:!!m,inline:!0,id:"submitButton",onClick:this.handleSubmit,text:s,size:"md"})))))},t.prototype.getSecretToggle=function e(){var t=this.props.showSecretBoardsLearnMore,n=this.state.privacy;if("protected"!==n){var r=g.a.createElement(j.b,null,E.a._("Secret"),t&&g.a.createElement(j.b,null,g.a.createElement(j.r,{target:"blank",href:M.a.GEN.templateConst.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},g.a.createElement(j.F,{size:"sm",smSize:2,mdSize:"xs",lgSize:"sm"},E.a._("Learn more")))));return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:r,labelId:"secret"},g.a.createElement(j.b,{deprecatedPadding:{y:2}},g.a.createElement(j.D,{switched:"secret"===n,id:"secret",name:"secret",onChange:this.handleChangePrivateToggle}))))}return null},t.prototype.getBoardFormFields=function e(){var t=this.props,n=t.currentUserIsOwner,r=t.isNameAndSecretView;return n?r?g.a.createElement(R,null,this.getBoardTitleInput(),this.getSecretToggle()):g.a.createElement(R,null,this.getBoardTitleInput(),this.getDescriptionInput(),this.getCategoriesDropdown(),this.getCoverEdit(),this.getSecretToggle(),this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox(),this.getCollaboratorsInviteToggle()):g.a.createElement(R,null,this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox())},t.prototype.submitDisabled=function e(){var t=this.state,n=t.descriptionValidatorErrors,r=t.name,a=t.nameValidatorErrors;return!r||a.length>0||n.length>0},t.prototype.render=function e(){return g.a.createElement(j.b,{color:"white",deprecatedMargin:{left:"auto",right:"auto"},maxWidth:600,shape:"rounded"},g.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},g.a.createElement(j.b,{deprecatedMargin:{right:5},deprecatedPadding:{x:2,y:3}},this.props.title),U,this.getBoardFormFields(),this.getFormFooter()))},A(t,[{key:"fieldValues",get:function e(){return{name:this.state.name,description:this.state.description,category:this.state.category,privacy:this.state.privacy,collab_board_email:this.state.collab_board_email,collaborator_invites_enabled:this.state.collaboratorInvitesEnabled}}}]),t}(f.Component);W.defaultProps={isNameAndSecretView:!1,showCollaboratorsLearnMore:!0,showSecretBoardsLearnMore:!0};var F=function e(t){return t.boards&&t.boards},H=t.a=Object(v.connect)(F)(W)},IynO:function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=d[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(c(r.parts[o],t))}else{for(var i=[],o=0;o<r.parts.length;o++)i.push(c(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:i}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=a[0],i={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(i):t.push(n[o]={id:o,parts:[i]})}return t}function a(e,t){var n=f(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function i(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function c(e,t){var n,r,a;if(t.singleton){var c=v++;n=g||(g=i(t)),r=l.bind(null,n,c,!1),a=l.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=p.bind(null,n),a=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(t),r=u.bind(null,n),a=function(){o(n)});return r(e),function t(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else a()}}function l(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function u(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var d={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},h=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),f=m(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,v=0,b=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(t=t||{}).singleton&&(t.singleton=h()),void 0===t.insertAt&&(t.insertAt="bottom");var a=r(e);return n(a,t),function e(o){for(var i=[],s=0;s<a.length;s++){var c=a[s];(l=d[c.id]).refs--,i.push(l)}o&&n(r(o),t);for(var s=0;s<i.length;s++){var l=i[s];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},NYeZ:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return l.a.createElement("img",{alt:e,className:"head",src:t})}function s(e){return{viewerId:e.viewer.id}}var c=n("OVW8"),l=n.n(c),u=n("DUIN"),p=n("GGB8"),d=n.n(p),m=n("IaRT"),h=n.n(m),f=3,g=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],v=function e(t,n){var r=t.name,a=t.image_thumbnail_url;return l.a.createElement("div",{className:d()("Image","Module","boardMessageRep",n)},l.a.createElement("img",{alt:r,src:a}))},b=function e(t){function n(e){var t=e.full_name,n=e.is_default_image,r=e.image_large_url,a=e.image_medium_url,s=e.username,c=t?t[0].toUpperCase():"",u=r||a;return u&&!n?o?l.a.createElement("div",null,l.a.createElement("a",{href:"/"+s+"/"},i(t,u))):l.a.createElement("div",null,i(t,u)):l.a.createElement("div",{className:"head"},c)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2],o=arguments[3],s=["ConversationHead",t];return l.a.createElement("div",{className:s.join(" ")},l.a.createElement("div",{className:"contentContainer"},l.a.createElement("div",{className:"headWrapper"},l.a.createElement("div",{className:"imagesWrapper"},r.map(function(e,t){return l.a.createElement("div",{className:e,key:t},n(a[t]))})))))},y=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.getUsersToShow=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.props.viewerId;return void 0!==r&&(n=n.filter(function(e){return e.id!==r})),n.concat(t.map(function(e){return{full_name:e}})).slice(0,3)},t.prototype.render=function e(){var t=this.props,n=t.board,r=t.emails,a=t.shouldLink,o=t.size,i=t.users,s=this.getUsersToShow(r,i),c=s.length<=3?g[s.length-1]:[];return n?v(n,o):b(o,c,s,a)},t}(c.Component);y.defaultProps={shouldLink:!1,size:"medium"},t.a=Object(u.connect)(s)(y)},NfjA:function(e,t,n){"use strict";function r(e){m.a.instance().handleConnect(e,!0,{})}function a(e){var t,n=e.network,a=(t={},t[f]=l.a._("Find friends from Facebook"),t[g]=l.a._("Find friends from Google+"),t[v]=l.a._("Find friends from Twitter"),t[b]=l.a._("Find friends from Yahoo"),t);return i.a.createElement("div",{className:"socialConnect",role:"listitem"},i.a.createElement(h.K,{onTouch:function e(){return r(n)}},i.a.createElement("div",{className:"socialConnectItem"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:c()("icon","socialConnect-"+n)},y)),i.a.createElement("div",{className:"right"},i.a.createElement("h4",{className:"title"},a[n])))))}t.a=a;var o=n("OVW8"),i=n.n(o),s=n("GGB8"),c=n.n(s),l=n("W/Cr"),u=n("IaRT"),p=n.n(u),d=n("Svvu"),m=n("cD7N"),h=n("gEaE"),f=d.default.FACEBOOK,g=d.default.GPLUS,v=d.default.TWITTER,b=d.default.YAHOO,y=i.a.createElement("em",null)},PrM5:function(e,t,n){"use strict";function r(e){var t;return t={},t[a]={connected:!!e.facebook_url,url:e.facebook_url},t[i]={connected:e.connected_to_google||!1},t[s]={connected:!!e.gplus_url},t[l]={connected:e.connected_to_microsoft||!1},t[o]={connected:!!e.twitter_url,url:e.twitter_url},t[c]={connected:e.connected_to_yahoo||!1},t}t.e=r,n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return c});var a="facebook",o="twitter",i="google",s="gplus",c="yahoo",l="microsoft"},RvAN:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,
enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=Object(v.a)({name:e.resourceName,options:Object.assign({page_size:e.pageSize},e.resourceOptions)})(C);return c.a.createElement(t,e)}t.a=i;var s=n("OVW8"),c=n.n(s),l=n("GGB8"),u=n.n(l),p=n("W/Cr"),d=n("IaRT"),m=n.n(d),h=n("WBZ1"),f=n.n(h),g=n("gEaE"),v=n("Grh7"),b=n("7IpV"),y={UP:"up",DOWN:"down"},E=100,C=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=a(this,e.call.apply(e,[this].concat(c))),o.handleScroll=f()(function(){if(!o.props.isFetching){var e=o.props.scrollThreshold;Object(b.b)(o._container)-Object(b.c)(o._container)-Object(b.a)(o._container)<e&&o.fetchMore()}},E),o.addEventListeners=function(e){var t=o.props.useWindow;t&&(e=window),o.removeEventListeners(),e&&(t||e.addEventListener("wheel",o.preventScroll),e.addEventListener("scroll",o.handleScroll)),o._container=e},o.preventScroll=function(e){var t=e.deltaY<0?y.UP:y.DOWN,n=o._container.scrollHeight-o._container.scrollTop-o._container.clientHeight==0,r=0===o._container.scrollTop;(t===y.DOWN&&n||t===y.UP&&r)&&e.preventDefault()},i=n,a(o,i)}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){var n=t.data.length;(0,t.onDataFetched)(n)},t.prototype.componentWillUnmount=function e(){this.removeEventListeners()},t.prototype.removeEventListeners=function e(){var t=this.props.useWindow;this._container&&(t||this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))},t.prototype.fetchMore=function e(){this.props.isFetching||(this.props.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.fetchMoreData())},t.prototype.render=function e(){var t=this.props,n=t.className,r=t.renderEmptyState,a=t.renderItem;return this.props.isFetching||0!==this.props.data.length?c.a.createElement("div",{className:u()(n,"listContainer"),ref:this.addEventListeners},this.props.data?c.a.createElement("ul",{className:"scrollableList"},this.props.data.map(function(e,t){return a(e,t)})):null,this.props.isAtEnd?null:c.a.createElement("div",{className:"loadingItem"},c.a.createElement(g.C,{accessibilityLabel:p.a._("Loading items"),show:this.props.isFetching}))):r()},t}(s.Component);C.defaultProps={data:[],onDataFetched:function e(){},scrollThreshold:400,useWindow:!1},i.defaultProps={pageSize:10}},Svvu:function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0});var a=n("hlP+"),o=n.n(a),i=n("BVzu"),s=n("XZ9g"),c=n.n(s),l=n("/4D9"),u=n.n(l),p=n("W/Cr"),d=n("YlIK"),m=n("DLm7"),h=n("EAiy"),f=void 0;Object.assign(r.prototype,o.a),Object.assign(r.prototype,{connect:function e(t,n){var r=this;(n=Object.assign({},{success:function e(){},error:function e(){},complete:function e(){}},n)).rerequest_facebook_email?u()().then(function(e){e.default.ensureInit(function(e){e.login(function(e){var t=e.authResponse,r=void 0,a=void 0;t&&(r=(r=t.grantedScopes)?r.split(","):[],a=t.userID);var o=r.find(function(e){return"email"===e}),i={id:a};"connected"===e.status&&o?n.success(i):n.error(i),n.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},h.a)}):c()().then(function(e){var a=e.default.getWindowOptions(),o=window.open("/connect/"+t+"/","",a);if(!o)return i.default.showError(p.a._("You must enable popups!")),void n.error({network:t,alertedUpstream:!0});var s=m.a.setInterval(function(){o.closed&&(clearInterval(s),r.handleComplete({network:t,error_message:"Window closed."}))},1e3);r.once("connect:"+t,function(e){clearInterval(s),e.error_message?n.error(e):n.success(e),n.complete()})})},complete:function e(t){this.handleComplete(t)},handleComplete:function e(t){var n="connect:"+t.network;if("facebook"===t.network){var r=t.id;r&&"string"!=typeof r&&(t.error_message="Facebook id must be of string type")}this.trigger(n,t)}}),Object.assign(r,{instance:function e(){return f||(f=new r),f},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",GPLUS:"gplus",YAHOO:"yahoo",MICROSOFT:"microsoft"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&r.instance().complete(e.data)}),t.default=d.a.expose("SocialConnect",r)},Vfgg:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var r=/[\- _,.<>:;+=*&@~\/\|!]*$/,a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"â€¦",o=void 0;if(t.length<=n)return t;if(" "!==t[n-1]&&" "===t[n])o=t.substring(0,n);else{var i=t.lastIndexOf(" ",n);o=t.substring(0,i)}return(o=o.replace(r,""))+a},o=/\s\s+/g,i=function e(t){return t.replace(o," ")}},XSNT:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("OVW8"),s=n.n(i),c=n("IaRT"),l=n.n(c),u=function(e){function t(n,o){r(this,t);var i=a(this,e.call(this,n,o));return i.handleChange=function(e){i.props.onChange&&i.props.onChange(e.target.value),i.setState({value:e.target.value,hasChanged:!0})},i.state={isFocused:i.props.focused||!1,value:i.props.value,hasChanged:void 0!==i.props.value},i}return o(t,e),t.prototype.componentDidMount=function e(){this.state.isFocused&&this._input.focus()},t.prototype.componentWillReceiveProps=function e(t){this.setState({value:t.value})},t.prototype.getId=function e(){return this.props.id},t.prototype.getValue=function e(){return this.state.value},t.prototype.focus=function e(){this._input.focus()},t.prototype.render=function e(){var t=this;return s.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function e(n){t._input=n},style:this.props.style,type:this.props.type,value:this.state.value||""})},t}(i.Component);t.a=u,u.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(e){new Promise(function(e){e()}).then(function(t){e(n("n/Nl"))}.bind(null,n)).catch(n.oe)})}},XpQc:function(e,t,n){(t=e.exports=n("D0DK")()).push([e.i,"._1mN_2 {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 10px;\n}\n\n._3b2sr {\n    background: #f1f1f1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding: 10px;\n}\n\n._1zZTh {\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    color: #b5b5b5;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding-right: 10px;\n}\n\n.ClU2f {\n    font-size: 14px;\n}\n\n._1UOMX {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    position: relative;\n}\n",""]),t.locals={conversationsGroupHeader:"_1mN_2",conversationGroupTokenizedWrapper:"_3b2sr",tokenizedWrapperTitle:"_1zZTh",newMessageTitle:"ClU2f",socialTypeaheadContainer:"_1UOMX"}},aoZs:function(e,t,n){"use strict";function r(e){var t=e.body,n=void 0===t?"":t,r=e.img,a=e.onClick,o=e.selected,i=e.title,s=x()("ImageBlock","sendShareUserContact","selectable",{selected:o});return w.a.createElement("div",{className:s,onClick:a,role:"button"},w.a.createElement("div",{className:"left circle imageSize_sendShare"},r),w.a.createElement("div",{className:"right"},w.a.createElement("h4",{className:"imageBlockContentTitle"},i),w.a.createElement("div",{className:"imageBlockContentBody"},w.a.createElement("span",null,n))))}function a(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var a=w.a.createElement("img",{alt:e.title,src:e.image_small_url});return w.a.createElement(r,{img:a,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(e)}),selected:t,title:e.full_name})}if("email"===e.type){var o=e.address,i=e.valid,s=i?w.a.createElement("span",{className:"icon"},o[0].toUpperCase()):P,c=Object(k.c)(I.a._("Email {{ email }}"),{email:o}),l=i?I.a._("Click to send!"):I.a._("Keep typing!");return w.a.createElement(r,{body:l,img:s,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i?n(e):void 0}),selected:t,title:c})}}function o(e){return w.a.createElement(r,{img:j,onClick:e.onClick,selected:!1,title:e.message})}function i(e){B.a.instance().handleConnect(e,!0,{})}function s(e){return e===M?I.a._("Facebook"):e===A?I.a._("Twitter"):e===L?I.a._("Google"):e===U?I.a._("Yahoo"):I.a._("Other")}function c(e,t){if(e===M)return I.a._("Friends who are on Pinterest");if(e===L){if(t&&-1!==t.indexOf("@gmail"))return t}else if(e===U&&t&&-1!==t.indexOf("@yahoo"))return t;return null}function l(e){var t=x()("SocialNetworkConnectButton","listItem","sendShare",e.network),n=c(e.network,e.email);return w.a.createElement("a",{onClick:e.onClick,role:"button"},w.a.createElement("div",{className:t},F,w.a.createElement("div",{className:"networkInfo"},w.a.createElement("h4",{className:"title"},s(e.network)),n?w.a.createElement("div",{className:"subtitle"},n):null)))}function u(e){var t=Object(D.e)(e.user),n=W.filter(function(e){return!1===t[e].connected});return w.a.createElement("div",{className:"SocialConnectPanel fullWidth compact sendShare"},w.a.createElement("div",{className:"header"},w.a.createElement("div",{className:"backNav"},w.a.createElement("a",{onClick:e.onClose,role:"button"},H,w.a.createElement("span",{className:"label"},I.a._("Back")))),w.a.createElement("div",{className:"prompt"},I.a._("Upload contacts from..."))),w.a.createElement("ul",{className:"socialConnectOptions"},n.map(function(t){return w.a.createElement("li",{key:t},w.a.createElement(l,{email:e.user.email,network:t,onClick:function e(){return i(t)}}))})))}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){return K.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function E(e,t){return K.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}var C=n("OVW8"),w=n.n(C),_=n("DUIN"),I=n("W/Cr"),S=n("XSNT"),T=n("IaRT"),O=n.n(T),N=n("GGB8"),x=n.n(N),k=n("5tOk"),P=w.a.createElement("span",{className:"icon typingEmail"},w.a.createElement("em",null)),j=w.a.createElement("em",{className:"icon socialConnectCta"}),D=n("PrM5"),R=n("Svvu"),B=n("cD7N"),M=R.default.FACEBOOK,L=R.default.GOOGLE,A=R.default.TWITTER,U=R.default.YAHOO,W=[M,A,L,U],F=w.a.createElement("em",{className:"icon"}),H=w.a.createElement("span",{className:"icon"}),V=n("skut"),z=n("Grh7"),G=function(e){function t(){var n,r,a;p(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=d(this,e.call.apply(e,[this].concat(i))),r.state={selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""},r.handleTextFieldChange=function(e){r.setState({value:e})},r.handleCloseSocialConnectPanel=function(){r.setState({showSocialConnectPanel:!1})},r.handleCollaboratorClick=function(e){var t=e.id;r.isIdSelected[t]=!r.isIdSelected[t];var n=r.state.selectedCollaborators.concat([e]);r.props.onSelectedCollaboratorsChange(n.filter(function(e){var t=e.id;return r.isIdSelected[t]})),r.setState({selectedCollaborators:n})},r.handleShowSocialConnectPanel=function(){r.setState({showSocialConnectPanel:!0})},r.handleTypeaheadSuggestionsChange=function(e){r.setState({typeaheadSuggestions:e})},r.isIdSelected={},a=n,d(r,a)}return m(t,e),t.prototype.render=function e(){var t=this;if(this.state.showSocialConnectPanel)return w.a.createElement(u,{onClose:this.handleCloseSocialConnectPanel,user:this.props.user});var n=this.state.value,r=(""===n?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:"email-"+n,address:n,valid:Object(k.g)(n)}).concat(this.props.shareSuggestions).filter(h)).map(function(e,n){return a(e,t.isIdSelected[e.id],t.handleCollaboratorClick)}).concat(w.a.createElement(o,{message:""===n?I.a._("Choose from contacts"):I.a._("Find people you know"),onClick:this.handleShowSocialConnectPanel})).map(function(e,t){return w.a.createElement("li",{key:t},e)});return w.a.createElement(V.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:n},w.a.createElement(S.a,{onChange:this.handleTextFieldChange,placeholder:I.a._("Name or email"),value:n}),w.a.createElement("div",{className:"ContactsList Typeahead sendShare fullWidth flexible compact open"},w.a.createElement("ul",{className:"results"},r)))},t}(C.Component);G.defaultProps={shareSuggestions:[]};var q=Object(z.a)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(G),Y=n("IxI0"),X=n("ZtCB"),K=n.n(X),Z=n("g5tP"),Q=n("gEaE");t.b=y,t.c=E;var J="board_create",$=function(e){function t(){var n,r,a;g(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=v(this,e.call.apply(e,[this].concat(i))),r.state={selectedCollaborators:[]},r.handleSubmit=function(e){r.props.dispatch(Object(Z.a)(e))},r.handleSelectedCollaboratorsChange=function(e){r.setState({selectedCollaborators:e})},r.emptyBoardData={collab_board_email:!0,collaborator_invites_enabled:!0,id:"",is_collaborative:!1,name:"",description:"",category:"other",owner:{username:r.props.currentUser.username},pin_count:0},a=n,v(r,a)}return b(t,e),t.prototype.componentDidUpdate=function e(t){if(t.creating&&!this.props.creating&&!this.props.error){var n=this.props.newBoard;n&&(this.inviteSelectedColaborators(n.id),this.props.onBoardCreate(n))}},t.prototype.inviteSelectedColaborators=function e(t){var n=this.state.selectedCollaborators.filter(function(e){return"email"===e.type});n.length>=1&&y(t,n.map(function(e){return e.type}));var r=this.state.selectedCollaborators.filter(function(e){return e.type.startsWith("user")});r.length>=1&&E(t,r.map(function(e){return e.id}))},t.prototype.render=function e(){var t=this.props,n=t.privacy,r=f(t,["privacy"]),a=w.a.createElement("div",null,w.a.createElement(q,{onSelectedCollaboratorsChange:this.handleSelectedCollaboratorsChange,user:this.props.currentUser}));return w.a.createElement(Y.a,Object.assign({},r,{board:Object.assign({},this.emptyBoardData,{privacy:n}),boardCollaboratorsSection:a,currentUserIsOwner:!0,gaCategory:"board_create",isDeletable:!1,isEditable:!0,onSubmit:this.handleSubmit,submitText:I.a._("Create"),title:w.a.createElement(Q.l,{size:"xs"},I.a._("Create board"))}))},t}(C.Component),ee=function e(t){return t.boards&&t.boards.creating},te=t.a=Object(_.connect)(ee)($)},cD7N:function(e,t,n){"use strict";function r(){}var a=n("YlIK"),o=n("Cjb7"),i=n("ZtCB"),s=n.n(i),c=n("Svvu"),l=n("DLm7"),u=n("EAiy"),p=1e3,d=110;Object.assign(r.prototype,{handleConnect:function e(t,n,r){if(n&&!u.a.isLimitedLogin()){var a={success:function(e){var a={network:t,data:e};this._internalConnectNetwork(n,a,r)}.bind(this),error:function e(t){r.error&&r.error(t)},complete:function e(){r.complete&&r.complete()}};this._externalConnectNetwork(t,n,a)}else{var o={network:t};this._internalConnectNetwork(n,o,r)}},updateConnectStatus:function e(){s.a.create("UserResource",{user_id:u.a.get("id"),username:u.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;u.a.set(t),o.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,r){n?c.default.instance().connect(t,r):r.success&&r.success({})},_internalConnectNetwork:function e(t,n,r){var a=this,o=s.a.create("UserSocialNetworkResource",n);(t?o.callCreate():o.callDelete()).then(function(e){a.updateConnectStatus(),r.success&&r.success(e)},function(e){r.error&&e instanceof Object&&r.error(e)}).fin(function(){r.complete&&r.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case c.default.FACEBOOK:n="UserFacebookFriendsResource";break;case c.default.TWITTER:n="UserTwitterFriendsResource";break;case c.default.GOOGLE:n="UserGmailFriendsResource";break;case c.default.YAHOO:n="UserYahooFriendsResource";break;case c.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,r){var a={resource:n,network:t,error:r};o.a.instance.publish("site","friendImportCompleted",a)},pollForFriends:function e(t,n){var r=this,a=(n=n||{}).resourceOptions||{},o=this._getResourceNameForNetworkFriends(t);if(o){var i=s.a.create(o,a);i.callGet({showError:!1}).then(function(){var e=n.success;e&&e(i),r._handleFriendsImported(t,i,null)},function(e){if(110===e.api_error_code)l.a.setTimeout(function(){r.pollForFriends(t,n)},1e3);else{var a=n.error;a&&a(),r._handleFriendsImported(t,i,e)}})}}});var m=null;r.instance=function(){return m||(m=new r),m},t.a=a.a.expose("SocialNetworkSettingsManager",r)},eXpm:function(e,t,n){var r=n("XpQc");"string"==typeof r&&(r=[[e.i,r,""]]);var a=n("IynO")(r,{});r.locals&&(e.exports=r.locals)},fvzG:function(e,t,n){"use strict";function r(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function a(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function o(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function i(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function c(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function u(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}function p(e,t){return function(n,r){var a=r(),o=m.a.create("ConversationMessagesResource",{conversation_id:e,text:t}),i=""+h;h+=1,o.callCreate().then(function(t){n(u(e,i,t.resource_response.data.id))}),n(l(e,{text:t,sender:a.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:i,board:null,event_type:null,pin:null,type:"message",user_did_it_data:null,user:null}))}}t.e=r,t.c=a,t.d=o,t.a=i,t.b=s,t.h=l,t.g=u,t.f=p;var d=n("ZtCB"),m=n.n(d),h=0},gEJd:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=n("mO/z"),d=n.n(p),m="undefined"!=typeof window&&window.performance?function(){return Math.floor(1e6*window.performance.now())}:function(){return 1e6*Date.now()},h=function e(t){var n=this;r(this,e),this.start=function(){return n.startTime=m(),n.startTime},this.end=function(){return n.endTime=m(),n.duration=n.startTime?n.endTime-n.startTime:null,n.duration},this.uuid=d()(),t&&Object.assign(this,t)},f=n("OVW8"),g=n.n(f),v=n("RklN"),b=n.n(v),y=function(e){function t(){var n,r,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=o(this,e.call.apply(e,[this].concat(c))),r.observer=null,r.handleVisibilityChanged=function(e,t){r.props.onVisibilityChange(e,t)},i=n,o(r,i)}return i(t,e),t.prototype.componentDidMount=function e(){var t=b.a.findDOMNode(this);t instanceof HTMLElement&&(this.node=t),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))},t.prototype.componentWillUpdate=function e(t){},t.prototype.componentWillUnmount=function e(){null!==this.observer&&(this.observer.unobserve(this.node),delete this.observer)},t.prototype.render=function e(){return f.Children.only(this.props.children)},t}(f.Component),E=n("IaRT"),C=n.n(E),w=n("Akne"),_=function(e){function t(n,r){s(this,t);var a=c(this,e.call(this,n,r));return a.getChildContext=function(){var e=a.props,t=e.view,n=e.viewParameter,r=e.component,o=e.element,i=e.objectId;return{view:t||a.context.view,viewParameter:n||a.context.viewParameter,component:r||a.context.component,element:o,objectId:i||a.context.objectId,getParentUuid:function e(){return a.getUuid()}}},a.componentWillUnmount=function(){a.unregisterComponent()},a.getLoggerContext=function(){var e=a.getChildContext();return{view:e.view,viewParameter:e.viewParameter,component:e.component,element:e.element,objectId:e.objectId}},a.getParentId=function(){return a.context.getParentUuid?a.context.getParentUuid():void 0},a.getUuid=function(){if(a.state.timedPair)return a.state.timedPair.uuid},a.getTimedPair=function(){return a.state.timedPair},a.setTimedPair=function(e){a.setState({timedPair:e})},a.isRegistered=!1,a.registerComponent=function(){a.props.timeSpentManager.registerComponent(a),a.isRegistered=!0},a.unregisterComponent=function(){a.isRegistered&&(a.props.timeSpentManager.unregisterComponent(a),a.isRegistered=!1)},a.handleVisibilityChange=function(e){var t=e[0].intersectionRatio,n=e[0].intersectionRect,r=n.bottom,o=n.left,i=n.right,s=n.top;t>0?a.registerComponent():0===t&&(0===r&&0===o&&0===i&&0===s?a.unregisterComponent():a.registerComponent())},a.state={timedPair:new h(a.getLoggerContext())},a}return l(t,e),t.prototype.componentWillReceiveProps=function e(t){this.isRegistered&&(this.props.view===t.view&&this.props.viewParameter===t.viewParameter&&this.props.component===t.component&&this.props.element===t.element&&this.props.objectId===t.objectId&&Object(w.a)(this.props.auxData,t.auxData)&&Object(w.a)(this.props.viewData,t.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent)))},t.prototype.render=function e(){return g.a.createElement(y,{options:{threshold:0},onVisibilityChange:this.handleVisibilityChange},this.props.children)},t}(f.Component);_.contextTypes={view:C.a.number,viewParameter:C.a.number,component:C.a.number,element:C.a.number,objectId:C.a.string,getParentUuid:C.a.func},_.childContextTypes={view:C.a.number,viewParameter:C.a.number,component:C.a.number,element:C.a.number,objectId:C.a.string,getParentUuid:C.a.func};var I=_,S={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},T=function e(){return window&&window.performance?"(Time: "+(window.performance.now()/1e3).toFixed(3)+"s)":""},O=function e(t){var n=!1;return function(){n||(n=!0,t.apply(void 0,arguments))}},N=function e(t){var n=t.flushEvents,r=t.shouldShowLogStatements,a=void 0!==r&&r,o=t.track,i=new Map,s=a?console:{error:function e(){},log:function e(){},group:function e(){},groupEnd:function e(){}};return console.group||(s.group=function(){var e;return(e=console).log.apply(e,arguments)},s.groupEnd=function(){}),new(function(){function e(){var t=this;u(this,e),this.appTimedPair=null,this.addEventListeners=function(){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange");var r=function n(){document[e]?t.unregisterApp(!1):document.hasFocus()&&t.registerApp()};n&&document.addEventListener(n,r,!1),window.addEventListener("focus",t.registerApp),window.addEventListener("blur",function(){return t.unregisterApp(!1)}),window.addEventListener("beforeunload",t.handleLeave),window.addEventListener("pagehide",t.handleLeave)},this.handleLeave=O(function(){return t.unregisterApp(!0)}),this.registerApp=function(){s.group("App Foreground",T()),null==t.appTimedPair?(t.appTimedPair=new h,t.appTimedPair.start(),t._unpauseAllComponents(),null!==t.appTimedPair&&void 0!==t.appTimedPair&&o({event_type:4700,pair_id:t.appTimedPair.uuid})):s.error("TimedPair already exists for app."),s.groupEnd()},this.unregisterApp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.group("App Background",T());var r=t.appTimedPair;if(null!==r&&void 0!==r){t._pauseAllComponents();var a=r.end();o({event_type:4701,duration_ns:a,pair_id:r.uuid}),t.appTimedPair=null}else s.error("No TimedPair found for app.");n(e),s.groupEnd()},this._activateComponent=function(e){s.group("Activating component",T()),a&&s.log(b.a.findDOMNode(e));var n=e.getTimedPair();if(n){n.start();var r=e.getLoggerContext(),i=r.component,c=r.element,l=r.objectId,u=r.view,p=r.viewParameter;o({event_type:4702,view_type:u,view_parameter:p,component:i,element:c,object_id_str:l,view_data:e.props.viewData,pair_id:n.uuid,aux_data:Object.assign({time_spent_foreground_pairid:t.appTimedPair&&t.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}s.groupEnd()},this._deactivateComponent=function(e){s.group("Deactivating component",T()),a&&s.log(b.a.findDOMNode(e));var n=e.getTimedPair();if(n){var r=n.view,i=n.viewParameter,c=n.component,l=n.element,u=n.objectId,p=n.end();o({event_type:4703,view_type:r,view_parameter:i,component:c,element:l,object_id_str:u,view_data:e.props.viewData,duration_ns:p,pair_id:n.uuid,aux_data:Object.assign({time_spent_foreground_pairid:t.appTimedPair&&t.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}s.groupEnd()},this._pauseAllComponents=function(){s.group("Pause all components"),i.forEach(function(e,n,r){e===S.ACTIVE&&t._deactivateComponent(n),r.set(n,S.PAUSED)}),s.groupEnd()},this._unpauseAllComponents=function(){s.group("Unpause all components"),i.forEach(function(e,t){t.setTimedPair(new h(t.getLoggerContext()))}),i.forEach(function(e,n){i.set(n,S.ACTIVE),t._activateComponent(n)}),s.groupEnd()}}return e.prototype.registerComponent=function e(t){null===this.appTimedPair?i.set(t,S.PAUSED):(i.set(t,S.ACTIVE),this._activateComponent(t))},e.prototype.unregisterComponent=function e(t){i.get(t)===S.ACTIVE&&(this._deactivateComponent(t),t.setTimedPair(new h(t.getLoggerContext()))),i.delete(t)},e.prototype.size=function e(){return i.size},e}())};n.d(t,"b",function(){return N}),n.d(t,!1,function(){return h}),n.d(t,"a",function(){return I})},"j1/O":function(e,t,n){"use strict";var r=n("hlP+"),a=n.n(r),o=n("g1tx"),i=n("ZtCB"),s=n.n(i),c=n("EAiy"),l=5,u=function e(t){t=t||{},this.tags=t.tags,this.enable_recent_queries=!!t.enable_recent_queries,this.minimum_term_character_length=t.minimum_term_character_length||0,this.bypass_lru_cache=t.bypass_lru_cache;var n={tags:t.tags,pin:t.pin_id},r=t.num_places;r?n.num_places=r:n.count="count"in t?t.count:5,t.should_geocode&&(n.should_geocode=!0),t.exclude_non_followers&&(n.exclude_non_followers=!0),t.field_set_key&&(n.field_set_key=t.field_set_key),t.pin_scope&&(n.pin_scope=t.pin_scope);var a="TypeaheadResource";t.resource_name&&(a=t.resource_name),this.searchResource=s.a.create(a,n),this.itemsCache=new o.a};Object.assign(u.prototype,a.a),Object.assign(u.prototype,{search:function e(t,n){var r=void 0;if(!t&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(t,[],{},n);if(!t&&c.a.isLimitedLogin())return this.abortSearch(),this.publishData(t,[],{},n);if(!t&&this.enable_recent_queries&&c.a&&c.a.isAuthenticated())r="recent_search";else{var a=this.bypass_lru_cache?{}:this.itemsCache.get(t);if(a){var o=a.items;if(o&&o.length){this.abortSearch();var i=a.hint;return void this.publishData(t,o,i,n)}}}t.length>=this.minimum_term_character_length?this.fetch(t,r,n):this.publishData(t,[],{},n)},getResource:function e(){return this.searchResource},abortSearch:function e(){this.trigger("typeaheadSearchAbort"),this.getResource().abort()},publishData:function e(t,n,r,a){var o={term:t,items:n,hint:r};this.trigger("data",o),a&&a(o)},setAutocompleteScope:function e(t){this.getResource().set("autocompleteScope",t)},fetch:function e(t,n,r){var a=this,o=this.getResource();if(o.isCalling()){var i=o.get("term");if(t===i)return;this.abortSearch()}""!==this.tags&&(this.trigger("typeaheadSearchStart",t),o.set("term",t),o.set("tags",n||this.tags),o.resetBookmark(),o.callGet({showError:!1}).then(function(e){var n=e.resource_response.data,o=n.items,i=n.hint||{},s={hint:i,items:o};a.cacheData(t,s),a.publishData(t,o,i,r)},function(e){a.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm:function e(t){this.itemsCache.remove(t)},cacheData:function e(t,n){this.itemsCache.set(t,n)},prefetch:function e(){this.warm||(s.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0)}}),t.a=u},mnfW:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l});var r=n("W/Cr"),a={},o=function e(t){return r.a.getPluralFunction(t)},i=function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"symbol",i={maximumFractionDigits:t,minimumFractionDigits:n};return r&&(i.style=r,"currency"===r&&(i.currency=a,i.currencyDisplay=o)),i},s=function e(t,n){var r=n||0,a=Math.pow(10,r),o=+(r?t*a:t).toFixed(8),i=Math.floor(o),s=o-i,c=1e-8,l=s>.5-c&&s<.5+c?i%2==0?i:i+1:Math.round(o);return r?l/a:l};a.currencySymbols={USD:"$",GBP:"Â£",CAD:"$",EUR:"â‚¬",AUD:"A$",NZD:"NZ$"},a.numberFormat=function(e,t,n,r,a,o,s){var c=i(n,r,a,o,s);return t.toLocaleString([e],c)},a.prettyNumberFormat=function(e,t,n){var r=void 0,o=void 0,i=n&&n.style||"",c=n&&n.shortform||!1,l=n&&n.uplimit||void 0,u=n&&n.currency||void 0;if(l&&t>l)return l+"+";if("currency"===i?(r=void 0===n||void 0===n.maximum_fraction_digits?2:n.maximum_fraction_digits,o=void 0===n||void 0===n.minimum_fraction_digits?2:n.minimum_fraction_digits):(r=void 0===n||void 0===n.maximum_fraction_digits?0:n.maximum_fraction_digits,o=void 0===n||void 0===n.minimum_fraction_digits?0:n.minimum_fraction_digits),c&&t>999&&(r=void 0===n||void 0===n.shortform_maximum_fraction_digits?2:n.shortform_maximum_fraction_digits,o=0),r<o)return String(t);var p=t,d="";if(c&&t>999)for(var m=[{G:1e9},{M:1e6},{k:1e3}],h=0;h<m.length;h+=1){var f=Object.keys(m[h])[0],g=m[h][f];if(t>=g){p=s(t/g*Math.pow(10,r))/Math.pow(10,r),d=f;break}}return a.numberFormat(e,p,r,o,i,u)+d},a.ngettext=function(e,t,n,a){var i=+o(e)(a),s=void 0;return s="en-US"===e&&1===i?n:t,r.a._(s,"",i)},a.DateFormatType={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",NUMERIC:"numeric",MONTH_DAY:"month_day"},a.formatDate=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n===a.DateFormatType.YEAR)return(t.getYear()+1900).toString();var o=void 0;switch(n){case a.DateFormatType.LONG:o={year:"numeric",month:"long",day:"numeric"};break;case a.DateFormatType.NUMERIC:o={year:"numeric",month:"numeric",day:"numeric"};break;case a.DateFormatType.WEEKDAY_DATE:o={weekday:"long",month:"long",day:"numeric",year:"numeric"};break;case a.DateFormatType.MONTH_DAY:o={month:"long",day:"numeric"};break;default:throw new Error('invalid dateFormatType "'+n+'"')}return r&&(o.timeZone="UTC"),IntlPolyfill.__disableRegExpRestore(),new IntlPolyfill.DateTimeFormat(e,o).format(t)};var c=a.prettyNumberFormat,l=a.currencySymbols;t.b=a},nX0T:function(e,t,n){"use strict";var r=n("OVW8"),a=n.n(r),o=n("s149"),i=n("gEJd"),s=function e(t){return a.a.createElement(i.a,Object.assign({},t,{timeSpentManager:o.a}))};t.a=s},s149:function(e,t,n){"use strict";var r=n("hVsM"),a=n("SnoN"),o=n("FJZF"),i=n("gEJd"),s=o.a.getQueryStringParams()&&o.a.getQueryStringParams().debug_timespent,c=function e(t){var n=a.a.getInstance(),o=r.a.fromPlainObject(t);n.addEvent(o)},l=function e(t){a.a.getInstance().flushEvents(t)};t.a=Object(i.b)({flushEvents:l,shouldShowLogStatements:s,track:c})},skut:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("OVW8"),s=n.n(i),c=n("IaRT"),l=n.n(c),u=n("j1/O"),p=function(e){function t(n,o){r(this,t);var i=a(this,e.call(this,n,o));return i.searchCache=Object.create(null),i.lastSearchedQuery=null,i.search=function(e){i.lastSearchedQuery=e,e in i.searchCache?i.props.onTypeaheadSuggestionsChange(i.searchCache[e],e):i.provider.search(e,function(t){var n=t.items;i.searchCache[e]=n,e===i.lastSearchedQuery&&i.props.onTypeaheadSuggestionsChange(n,e)})},i.props.shouldCacheEmptyQuery&&(i.searchCache[""]=null),i}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.props.resourceOptions||{};this.provider=new u.a(Object.assign({resource_name:this.props.resourceName},t));var n=this.props.value;void 0!==n&&null!==n&&this.props.allowSearchOnMount&&this.search(this.props.value)},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;void 0!==n&&null!==n&&n!==this.props.value&&this.search(n)},t.prototype.render=function e(){return s.a.createElement("div",{className:this.props.className},this.props.children)},t}(i.Component);p.defaultProps={resourceName:"TypeaheadResource",shouldCacheEmptyQuery:!1},t.a=p},tZWC:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n("OVW8"),u=n.n(l),p=n("DUIN"),d=n("GGB8"),m=n.n(d),h=n("PrM5"),f=n("W/Cr"),g=n("XSNT"),v=n("IaRT"),b=n.n(v),y=n("z/23"),E=n("9bGG"),C=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()},t.prototype.render=function e(){var t=this.props,n=t.is_pinner?f.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?f.a._("Facebook"):"gplus_non_pinner"===t.type?f.a._("Google"):f.a._("Enter an email address");return u.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),t.send_pin_image?u.a.createElement("span",{className:"typeaheadImg"},u.a.createElement("img",{alt:"",src:t.send_pin_image})):null,u.a.createElement("p",{className:m()("typeaheadName",{hasImage:t.send_pin_image})},t.label),u.a.createElement("div",{className:"titleWrapper"},u.a.createElement("i",{className:m()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),u.a.createElement("p",{className:"title"},n)))},t}(l.Component),w=Object(E.a)(C),_=n("NfjA"),I=n("Svvu"),S=n("skut"),T=n("Kqaz"),O=n("Cjb7"),N=n("5tOk"),x=n("aoZs"),k=[I.default.FACEBOOK,I.default.TWITTER,I.default.GPLUS,I.default.YAHOO],P=u.a.createElement("div",{className:"footer white"}),j=function(e){function t(){var n,r,a;i(this,t);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return n=r=s(this,e.call.apply(e,[this].concat(c))),r.state={networks:Object(h.e)(r.props.viewer),open:!1,typeaheadSuggestions:[]},r.onUserInviteClick=function(e){var t=e.id,n=r.props,a=n.boardId,o=n.onInviteItemClick;a?o(Object(x.c)(a,[t])):o(!0,e)},r.handleBodyClick=function(e){r._results.contains(e.target)||r.setState({open:!1})},r.handleTypeaheadSuggestionsChange=function(e){var t=r.props.viewer;r.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})},r.handleOnEmailInviteClick=function(){var e=r.props,t=e.boardId,n=e.onInviteItemClick,a=e.value;t?n(Object(x.b)(t,[a])):n(!1,a)},r.subscriber=O.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){r.setState({networks:Object(h.e)(n)})}),r.logTypeaheadInput=function(e){(0,r.props.contextLog)(4113,{component:13029,element:1043,entered_query:e})},r.logSearchContactItemClick=function(e){var t=r.props;(0,t.contextLog)(101,{component:13029,element:1044,entered_query:t.value,result_index:e})},r.renderResultItems=function(){var e=r.props.changeOnTextHover,t=m()("Typeahead","userSelect",{open:r.state.open}),n=r.state.typeaheadSuggestions.map(function(t,n){return u.a.createElement(w,Object.assign({currentUser:r.props.currentUser,key:n,onClick:function e(){r.onUserInviteClick(t),r.logSearchContactItemClick(n)},onHoverEnd:function t(){return e?r.restoreTextFieldValue():null},onHoverStart:function n(){return e?r.forceTextFieldValue(t.label):null}},t))}).concat(r.getStaticItems()).map(function(e,t){return u.a.createElement("li",{key:t},e)});return u.a.createElement("div",{className:t,ref:function e(t){r._results=t},style:{zIndex:1e3}},u.a.createElement("ul",null,n),r.props.inBoardCollaboratorInviter?P:null)},a=n,s(r,a)}return c(t,e),t.prototype.componentDidMount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;this.setState({open:n.length>0})},t.prototype.componentWillUnmount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()},t.prototype.getStaticItems=function e(){return[].concat(this.getEmailItems(),this.getSocialItems(this.state.networks))},t.prototype.getEmailItems=function e(){var t=this.props.value;return[u.a.createElement(y.a,{email:t,isValid:Object(N.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]},t.prototype.getSocialItems=function e(t){return Object.keys(t).filter(function(e){return k.includes(e)}).filter(function(e){return!1===t[e].connected}).map(function(e,t){return u.a.createElement(_.a,{key:"socialConnect-"+e,network:e})})},t.prototype.forceTextFieldValue=function e(t){this.previousValue=this.props.value,this.props.onChange(t)},t.prototype.restoreTextFieldValue=function e(){this.props.onChange(this.previousValue),delete this.previousValue},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardId,a=n.className,o=n.inBoardCollaboratorInviter,i=n.onChange,s=n.onKeyDown,c=n.showInputPlaceholder,l=n.value,p=m()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),d=r?{board:r}:null;return u.a.createElement(S.a,{className:m()(a,"reactSocialTypeahead"),onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:d,value:l},u.a.createElement("div",null,u.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},u.a.createElement(g.a,{className:p,id:"collaboratorInviterTypeahead",onChange:function e(n){i(n),t.logTypeaheadInput(n)},onKeyDown:s,placeholder:c?f.a._("Name or email","search"):null,value:l,focused:!0})),this.renderResultItems()))},t}(l.Component);j.defaultProps={changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0};var D=function e(t){return{viewer:t.viewer}},R=t.a=Object(T.a)(Object(p.connect)(D)(j))},"z/23":function(e,t,n){"use strict";function r(e){var t=e.email,n=e.isValid,r=e.onClick,a=e.showSendEmailText,i=n?o.a.createElement("div",{className:"icon"},t[0].toUpperCase()):o.a.createElement("div",{className:s()("icon","typingEmail")},d),l=n?c.a._("Click to send!"):c.a._("Keep typing!"),u=a?Object(p.h)(c.a._("Email {{ email }}"),{email:t}):Object(p.h)(c.a._("Invite {{ email }}"),{email:t});return o.a.createElement("div",{className:s()("sendToEmail",{unclickable:!n})},o.a.createElement("a",{className:"selectableEmailItem",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){n&&r()}),role:"button"},o.a.createElement("div",{className:"left"},i),o.a.createElement("div",{className:"right"},o.a.createElement("h4",{className:"title"},u),o.a.createElement("p",{className:"subtitle"},l))))}t.a=r;var a=n("OVW8"),o=n.n(a),i=n("GGB8"),s=n.n(i),c=n("W/Cr"),l=n("IaRT"),u=n.n(l),p=n("5tOk"),d=o.a.createElement("em",null)}});